apiVersion: v1
kind: ConfigMap
metadata:
  name: deepiri-config
  namespace: default
  annotations:
    description: "ConfigMap for Deepiri local/dev Kubernetes deployment. For cloud/production, create a separate ConfigMap with production values."
data:
  # Server Configuration
  NODE_ENV: "development"
  PORT: "5000"
  HOST: "0.0.0.0"
  
  # Development URLs (Local/Docker)
  # Note: These are for external access. Internal service communication uses service names (e.g., backend-service:5000)
  DEV_CLIENT_URL: "http://localhost:5173"
  DEV_API_URL: "http://localhost:5000/api"
  DEV_PYAGENT_URL: "http://localhost:8000"
  
  # CORS Configuration
  CORS_ORIGIN: "http://localhost:5173"
  CLIENT_URL: "http://localhost:5173"
  
  # AI Configuration
  # For local dev: Use localai (free, runs locally)
  # For cloud: Change to openai and set OPENAI_API_KEY in Secrets
  AI_PROVIDER: "localai"  # localai | openai | deepinfra
  OPENAI_API_BASE: "http://localai-service:8080/v1"  # Kubernetes service name (not localhost)
  OPENAI_MODEL: "gpt-4o-mini"
  OPENAI_MAX_TOKENS: "2000"
  OPENAI_TEMPERATURE: "0.7"
  OPENAI_TOP_P: "0.9"
  
  # LocalAI Configuration (Local/Free Path)
  LOCALAI_API_BASE: "http://localai-service:8080/v1"
  LOCALAI_MODEL: "gpt-4o-mini"
  
  # Agent Configuration
  OPENAI_AGENT_MODEL: "gpt-4o-mini"
  AGENT_TEMPERATURE: "0.5"
  AGENT_TOP_P: "0.9"
  
  # Python Agent Configuration
  PYAGENT_PORT: "8000"
  PYAGENT_HOST: "0.0.0.0"
  NODE_BACKEND_URL: "http://backend-service:5000"
  
  # RAG / Embeddings Configuration
  VECTOR_STORE: "chromadb"
  CHROMADB_PATH: "./chroma_db"
  CHROMADB_COLLECTION: "deepiri_embeddings"
  CHROMADB_PERSIST: "true"
  EMBEDDING_MODEL: "all-minilm-l6-v2"
  EMBEDDING_DIMENSIONS: "384"
  
  # Cache Configuration
  CACHE_TTL_ADVENTURES: "3600"
  CACHE_TTL_EVENTS: "1800"
  CACHE_TTL_WEATHER: "900"
  CACHE_TTL_MAPS: "3600"
  
  # Rate Limiting
  RATE_LIMIT_WINDOW_MS: "900000"
  RATE_LIMIT_MAX_REQUESTS: "100"
  RATE_LIMIT_SKIP_SUCCESSFUL: "true"
  
  # Logging
  LOG_LEVEL: "info"
  LOG_FORMAT: "json"
  
  # Performance Monitoring
  ENABLE_METRICS: "true"
  METRICS_PORT: "9090"
  
  # Challenge Generation
  DEFAULT_CHALLENGE_DURATION: "30"
  MAX_CHALLENGE_DURATION: "120"
  MIN_CHALLENGE_DURATION: "5"
  DEFAULT_CHALLENGE_DIFFICULTY: "medium"

